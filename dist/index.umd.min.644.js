"use strict";(("undefined"!==typeof self?self:this)["webpackChunkindex"]=("undefined"!==typeof self?self:this)["webpackChunkindex"]||[]).push([[644,135],{1644:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("search-bar",{attrs:{suggestions:e.suggestions,getSuggestionDisplayValue:function(e){return e["DireccionOrPOI"]},getSuggestionId:function(e){return e["ID"]}},on:{search:e.changeLocation},model:{value:e.searchString,callback:function(t){e.searchString=t},expression:"searchString"}})},s=[],o=n(4731),i=(n(1800),n(1539),n(3210),n(8674),n(2222),n(1249),n(1038),n(8783),n(8309),n(4916),n(5306),n(5086)),u=n(9204),a=n.n(u),c=function(e){var t=["ID","DireccionOrPOI","Latitud","Longitud"];return t.reduce((function(t,n){return t[n]=e.querySelector(n).textContent.trim(),t}),{})},l=function(){var e=(0,o.Z)(regeneratorRuntime.mark((function e(t,n,r){var s,o,i,u,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=new Headers,s.append("Content-Type","text/xml"),o='<?xml version="1.0" encoding="utf-8"?>\n<soap:Envelope\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:xsd="http://www.w3.org/2001/XMLSchema"\n  xmlns:soap="https://schemas.xmlsoap.org/soap/envelope/">\n  <soap:Body>\n      <GetTipo xmlns="http://tempuri.org/">\n          <busqueda>'.concat(t,"</busqueda>\n      </GetTipo>\n  </soap:Body>\n</soap:Envelope>"),i={method:"POST",headers:s,body:o,redirect:"follow",signal:r},e.next=6,fetch(n,i);case 6:return u=e.sent,a=new DOMParser,e.t0=a,e.next=11,u.text();case 11:return e.t1=e.sent,c=e.t0.parseFromString.call(e.t0,e.t1,"text/xml"),e.abrupt("return",c.querySelector("GetTipoResult").textContent.trim());case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)(regeneratorRuntime.mark((function e(t,n,r,s,o,i){var u,a,l,g,p,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=new Headers,u.append("Content-Type","text/xml"),a='<?xml version="1.0" encoding="utf-8"?>\n<soap:Envelope\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xmlns:xsd="http://www.w3.org/2001/XMLSchema"\n  xmlns:soap="https://schemas.xmlsoap.org/soap/envelope/">\n  <soap:Body>\n    <FindDireccionesTextLibre xmlns="http://tempuri.org/">\n        <busqueda>'.concat(t,"</busqueda>\n        <tipo>").concat(n,"</tipo>\n        <pais>").concat(s,"</pais>\n        <canResultados>").concat(o,"</canResultados>\n    </FindDireccionesTextLibre>\n  </soap:Body>\n</soap:Envelope>"),l={method:"POST",headers:u,body:a,redirect:"follow",signal:i},e.next=6,fetch(r,l);case 6:return g=e.sent,p=new DOMParser,e.t0=p,e.next=11,g.text();case 11:return e.t1=e.sent,h=e.t0.parseFromString.call(e.t0,e.t1,"text/xml"),e.abrupt("return",Array.from(h.querySelectorAll("DireccionTextLibre")).map(c));case 14:case"end":return e.stop()}}),e)})));return function(t,n,r,s,o,i){return e.apply(this,arguments)}}(),p={name:"SAITSearchBar",components:{SearchBar:i["default"]},props:{config:Object},data:function(){return{searchString:"",suggestions:[],currentAbortController:null}},watch:{searchString:function(e){""!==e?this.getSuggestions(this):this.suggestions=[]}},methods:{getSuggestions:a().throttle((0,o.Z)(regeneratorRuntime.mark((function e(){var t,n,r,s,o,i,u,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return null===(t=this.currentAbortController)||void 0===t||t.abort(),this.currentAbortController=new AbortController,n=this.currentAbortController.signal,r=this.searchString,s=this.config,o=s.search_type_url,i=s.search_addresses_url,u=s.search_country,a=s.search_max_results,e.prev=5,e.next=8,l(r,o,n);case 8:return c=e.sent,e.next=11,g(r,c,i,u,a,n);case 11:this.suggestions=e.sent,this.currentAbortController=null,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),"AbortError"!==e.t0.name&&console.debug(e.t0);case 18:case"end":return e.stop()}}),e,this,[[5,15]])}))),500),changeLocation:function(e){if(0!==this.suggestions.length){var t=this.suggestions[e],n=t.Latitud,r=t.Longitud,s=t.DireccionOrPOI;this.searchString=s;var o=function(e){return parseFloat(e.replace(",","."))},i=[o(n),o(r)];this.$emit("change-location",i)}}}},h=p,d=n(3736),m=(0,d.Z)(h,r,s,!1,null,null,null),f=m.exports},5086:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-bar",class:{"show-suggestions":e.showSuggestions}},[n("b-input-group",[n("b-form-input",{staticClass:"search-input",attrs:{type:"text",placeholder:"Buscar",title:"Buscar una dirección, comuna o zona",value:e.value},on:{input:e.input,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.moveToSuggestion("down"))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.moveToSuggestion("up"))}]}}),n("b-input-group-append",[n("b-button",{staticClass:"remove-btn",attrs:{title:"Borrar búsqueda",type:"button"},on:{click:function(t){return e.input("")}}},[n("b-icon",{attrs:{icon:"x"}})],1),n("b-button",{staticClass:"search-btn",attrs:{title:"Buscar",type:"button"},on:{click:e.search}},[n("b-icon",{attrs:{icon:"search"}})],1)],1)],1),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.showSuggestions,expression:"showSuggestions"}],staticClass:"suggestions"},e._l(e.suggestions,(function(t,r){return n("li",{key:e.getSuggestionId(t),class:{selected:r===e.selectedSuggestionIndex},on:{click:function(t){return e.$emit("search",r)}}},[e._v(" "+e._s(e.getSuggestionDisplayValue(t))+" ")])})),0)],1)},s=[],o=n(4621),i=n(3578),u=n(5067),a=n(7555),c=(n(6593),{name:"SearchBar",components:{BIcon:o.H,BButton:i.T,BFormInput:u.e,BInputGroupAppend:a.B},props:{value:String,suggestions:Array,getSuggestionId:Function,getSuggestionDisplayValue:Function},data:function(){return{selectedSuggestionIndex:0}},computed:{showSuggestions:function(){return this.suggestions.length>0}},methods:{moveToSuggestion:function(e){var t=this.suggestions.length;0!==t&&("down"===e?this.selectedSuggestionIndex++:"up"===e?this.selectedSuggestionIndex--:this.selectedSuggestionIndex++,this.selectedSuggestionIndex>=t&&(this.selectedSuggestionIndex=t-1),this.selectedSuggestionIndex<0&&(this.selectedSuggestionIndex=0))},input:function(e){this.selectedSuggestionIndex=0,this.$emit("input",e)},search:function(){this.$emit("search",this.selectedSuggestionIndex)}}}),l=c,g=n(3736),p=(0,g.Z)(l,r,s,!1,null,"3408c470",null),h=p.exports}}]);
//# sourceMappingURL=index.umd.min.644.js.map